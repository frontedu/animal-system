/*!
 *
 * Bryntum Calendar 5.0.5 (TRIAL VERSION)
 *
 * Copyright(c) 2022 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
(function(G,K){function j(G,K){return p(K- -0x214,G);}const P=G();while(!![]){try{const S=-parseInt(j(0x53,0x4b))/0x1*(-parseInt(j(0x84,0x36))/0x2)+parseInt(j(-0x3a,0xf))/0x3+parseInt(j(0x17,0x5b))/0x4+parseInt(j(0x24,0x50))/0x5*(-parseInt(j(0x1e,0x12))/0x6)+-parseInt(j(-0x4e,-0x13))/0x7*(parseInt(j(0x21,0x6b))/0x8)+parseInt(j(0x6b,0x66))/0x9+parseInt(j(-0x29,0x3))/0xa*(-parseInt(j(0x3d,0x23))/0xb);if(S===K)break;else P['push'](P['shift']());}catch(y){P['push'](P['shift']());}}}(g,0xca9f7));import{GridFeatureManager}from'./GridBase.js';import{DragHelper}from'./LocalizableComboItems.js';import{Delayable,InstancePlugin,DomHelper,_defineProperty,ObjectHelper,WalkHelper}from'./Editor.js';import{TreeColumn}from'./Tree.js';class RowReorder extends Delayable(InstancePlugin){static get[R(0xce,0x84)](){function d(G,K){return R(G,K-0x395);}return d(0x3f7,0x441);}static get['configurable'](){return{'showGrip':null,'hoverExpandTimeout':0x3e8,'touchStartDelay':0x12c};}[R(0x8e,0x9d)](G,K){function z(G,K){return R(K,G- -0x5d);}this[z(-0x12,-0x1d)]=G,super[z(0x40,0x6)](...arguments);}[R(0x88,0x41)](){var G;function U(G,K){return R(G,K-0x35f);}(G=this[U(0x395,0x3dd)])===null||G===void 0x0?void 0x0:G[U(0x3be,0x407)](),super['doDestroy']();}['init'](){const G=this,{grid:K}=G;G[n(0x6c,0x4b)]=new DragHelper({'name':n(0x8a,0xad),'cloneTarget':!![],'dragThreshold':0xa,'targetSelector':n(0x9c,0x58),'lockX':!![],'scrollManager':K['scrollManager'],'dragWithin':K[n(0xae,0x82)],'outerElement':G[n(0x44,0x12)],'touchStartDelay':G[n(0x4e,0x32)],'monitoringConfig':{'scrollables':[{'element':K[n(0x99,0x56)]['element'],'direction':n(0xb8,0xc5)}]},'ignoreSamePositionDrop':![],'createProxy'(P){const S=P['cloneNode'](!![]),y=document[u(0x1c7,0x1a0)](u(0x1a5,0x168));S[u(0x211,0x201)]('id'),S[u(0x1df,0x205)][u(0x1ac,0x1e8)]='',y[u(0x1b0,0x1cd)](S);if(K[u(0x1e2,0x1d7)]['length']>0x1){const w=S[u(0x1c9,0x1dd)](!![]);w['classList'][u(0x1e4,0x1c2)]('b-row-dragging-multiple'),y[u(0x1b0,0x1fc)](w);}function u(G,K){return n(G-0x156,K);}return DomHelper[u(0x200,0x1cc)](y,'b-selected',u(0x1f9,0x1d7),u(0x1cf,0x203)),y;},'listeners':{'beforedragstart':'onBeforeDragStart','dragstart':n(0x9b,0x4a),'drag':'onDrag','drop':n(0x68,0x4b),'reset':n(0xa9,0x63),'prio':0x2710,'thisObj':G}}),G[n(0xa2,0xd9)]=DomHelper[n(0x71,0x27)]({'className':n(0x75,0x9c)});function n(G,K){return R(K,G- -0x12);}G[n(0x65,0x57)](G[n(0x6c,0x1d)],[n(0x94,0x62),n(0x2c,-0x12),n(0x86,0x45),n(0x59,0xb)],n(0x9d,0x84));}static get['pluginConfig'](){function N(G,K){return R(K,G-0x552);}return{'after':[N(0x5f9,0x5fa)]};}get['targetSubGridElement'](){function T(G,K){return R(G,K-0x277);}const G=this[T(0x295,0x2c2)]['regions'][0x0];return this[T(0x281,0x2c2)]['subGrids'][G][T(0x2eb,0x337)];}[R(0x69,0xb9)]({source:G,context:K}){const P=this,{grid:S}=P,y=P['targetSubGridElement'];if(P[v(0x25,0x2a)]||S[v(-0x34,-0x37)]||S[v(-0x28,-0x27)]||!y[v(-0x55,-0x2b)](K[v(0x27,0x16)]))return![];K[v(0x33,0x39)]=S[v(0xb,0x6)](K[v(0x27,0x48)]);if(K[v(0x33,0x62)]['readOnly'])return![];K[v(-0x3e,0x4)]=S[v(0x2b,0x13)]['getRowFor'](K['startRecord'])[v(-0x42,-0x5e)];function v(G,K){return R(K,G- -0x99);}G[v(0x9,0x28)][v(0x18,0x5b)]==='touch'&&(!S[v(0x0,0x2a)](K['startRecord'])&&S[v(0x26,-0x17)]({'record':K['startRecord'],'addToSelection':!![]}));const w=K[v(-0x59,-0x68)]=S[v(0x5,-0x2f)]['filter'](B=>!B[v(-0x34,-0x66)])[v(0x3b,0x41)]()[v(0x2a,0x25)]((B,Z)=>S[v(-0x21,0x3)][v(-0x44,-0x8d)](B)-S['store'][v(-0x44,-0x59)](Z));return w[v(0x32,0x6f)]>0x0&&!w['some'](B=>B[v(-0x3,-0x8)]);}[R(0xe2,0xad)]({context:G}){var K,P;const S=this,{grid:y}=S,{cellEdit:w,cellMenu:B,headerMenu:Z}=y[J(0x445,0x465)];w&&(S['cellEditDisabledState']=w['disabled'],w[J(0x4bb,0x4e6)]=!![]);B===null||B===void 0x0?void 0x0:(K=B[J(0x536,0x504)])===null||K===void 0x0?void 0x0:K['call'](B,![]);function J(G,K){return R(G,K-0x428);}Z===null||Z===void 0x0?void 0x0:(P=Z[J(0x519,0x504)])===null||P===void 0x0?void 0x0:P[J(0x4d3,0x487)](Z,![]),y[J(0x511,0x4e8)][J(0x4d0,0x48b)]['add']('b-row-reordering');const a=G['element'][J(0x4c7,0x4ef)](J(0x47c,0x47b));a===null||a===void 0x0?void 0x0:a[J(0x471,0x48b)][J(0x4bf,0x4f1)](J(0x46a,0x4b3)),G[J(0x501,0x4e8)][J(0x464,0x4a8)][J(0x487,0x48b)][J(0x4ae,0x4f1)](J(0x4d0,0x4da),'b-hover'),y[J(0x48a,0x4b5)][J(0x45e,0x494)](S[J(0x4c8,0x4dc)]);}[R(0x8f,0x49)]({context:G,event:K}){const P=this,{grid:S}=P,{store:y,rowManager:w}=S;let B=!![],Z=S[E(0x492,0x4b0)][E(0x475,0x45f)](K['clientY']),a,k,C,m;function E(G,K){return R(G,K-0x3ec);}if(Z){const i=Z[E(0x45b,0x443)]+S['_bodyRectangle']['y']-S['scrollable']['y'],r=i+Z[E(0x43b,0x44e)]/0x2;k=Z['dataIndex'],a=y['getAt'](k),C=K[E(0x43a,0x46e)]>r;}else K[E(0x492,0x46e)]<S['_bodyRectangle']['y']?(k=0x0,a=y[E(0x464,0x43d)],C=![]):(k=y[E(0x48c,0x476)]-0x1,a=y[E(0x46e,0x44a)],C=!![]),Z=S[E(0x4d8,0x4b0)][E(0x452,0x47f)](k);if(a===P[E(0x430,0x448)]&&P['after']===C){G[E(0x4ad,0x4a3)]=P[E(0x3f8,0x432)];return;}P[E(0x487,0x448)]=a,P['after']=C;a===G[E(0x4ff,0x4b8)]&&(B=![]);!C&&k===0x0&&y[E(0x432,0x47a)]&&(B=![]);if(y['tree']){m=C?a[E(0x424,0x472)]:a;G['records']['some'](o=>o[E(0x451,0x430)](a))&&(B=![]);if(G[E(0x471,0x45b)]){const o=w[E(0x47f,0x4b1)](G['parent']);o===null||o===void 0x0?void 0x0:o[E(0x506,0x4c1)]('b-row-reordering-target-parent');}G[E(0x451,0x45b)]=a[E(0x414,0x45b)];if(!G[E(0x461,0x45b)]['isRoot']){const F=w['getRowById'](G[E(0x497,0x45b)]);F===null||F===void 0x0?void 0x0:F[E(0x474,0x4c3)](E(0x4bb,0x496));}P['clearTimeout'](P[E(0x488,0x455)]),a&&a[E(0x468,0x4b2)]&&!a['isExpanded'](y)&&(P[E(0x48f,0x455)]=P['setTimeout'](()=>S['expand'](a),P[E(0x479,0x433)]));}else m=C?y[E(0x456,0x45a)](k+0x1):a;Z&&DomHelper[E(0x4a9,0x45e)](P['dropIndicator'],Z[E(0x45f,0x443)]+(C?Z[E(0x435,0x44e)]:0x0)),G[E(0x485,0x4c5)]=m,G['valid']=P[E(0x40d,0x432)]=B;}async[R(0xb6,0x7a)](G){const K=this,P=G['context'];P[h(0x55b,0x55b)]=P[h(0x556,0x55b)]&&K['reorderValid'];function h(G,K){return R(G,K-0x4a4);}if(P[h(0x51e,0x55b)]){P['async']=!![];K[h(0x57a,0x572)][h(0x54c,0x51c)]['tree']&&(P[h(0x55e,0x533)]=P[h(0x4d3,0x4e4)]['map'](y=>{function e(G,K){return h(G,K-0xa6);}var w;return{'record':y,'parentId':(w=y[e(0x58c,0x5b9)])===null||w===void 0x0?void 0x0:w['id'],'parentIndex':y[e(0x5ad,0x5fd)]};}));const S=await K[h(0x523,0x4e9)](h(0x57b,0x545),G);S===![]&&(P[h(0x589,0x55b)]=![]),await K[h(0x507,0x522)]['animateProxyTo'](K[h(0x572,0x558)],{'align':h(0x558,0x549)}),await K[h(0x54e,0x573)](P);}K[h(0x54c,0x50b)](K[h(0x54d,0x50d)]),K[h(0x4b4,0x500)]=K['after']=null,K[h(0x4cb,0x4e9)](h(0x569,0x51d),G);}async[R(0x8e,0xcf)](G){const K=this,{grid:P}=K,{store:S}=P;let y=G[I(0x416,0x3e2)];G[I(0x48d,0x4c4)]=G[I(0x48d,0x480)]&&!y[I(0x46d,0x469)](w=>!S[I(0x44b,0x493)](w));if(G[I(0x48d,0x489)]){let w;S['tree']?(y=y['filter'](B=>!B[I(0x445,0x3fa)]||!y[I(0x44b,0x47a)](B[I(0x445,0x42a)])),w=await G['parent'][I(0x451,0x491)](y,G[I(0x4af,0x4fd)]),P[I(0x49a,0x4db)]['forEach'](B=>B['removeCls'](I(0x480,0x49e))),G[I(0x48d,0x48d)]=w!==![]):S[I(0x422,0x3fd)](y,G[I(0x4af,0x487)]),S[I(0x46b,0x49f)]();}function I(G,K){return R(K,G-0x3d6);}G['finalize'](G[I(0x48d,0x443)]),P[I(0x496,0x4cc)][I(0x439,0x46f)]['remove'](I(0x42f,0x3f0));}[R(0x70,0xbb)](){const G=this,K=G['grid'][t(0x1cb,0x18a)]['cellEdit'];G[t(0x17e,0x198)][t(0x212,0x20d)][t(0x1fd,0x1b0)]['remove'](t(0x1d3,0x1a6));function t(G,K){return R(G,K-0x14d);}K&&(K[t(0x236,0x20b)]=G[t(0x17c,0x190)]),G[t(0x20f,0x201)][t(0x23b,0x216)](),DomHelper['removeClsGlobally'](G['grid'][t(0x1c0,0x20d)],'b-row-reordering-target-parent');}['onPaint'](){function A(G,K){return R(G,K-0xcd);}this[A(0x162,0x15e)]();}[R(0x7,0x54)](G){function q(G,K){return R(G,K-0x1d6);}this[q(0x1d0,0x221)]['element']['classList'][q(0x1f1,0x22e)](q(0x1ee,0x23c),G);}}RowReorder[R(0x90,0xd6)]='',RowReorder[R(0x21,0x48)]=R(0x81,0xac),GridFeatureManager[R(0x38,0x64)](RowReorder,![]),GridFeatureManager[R(0x63,0x64)](RowReorder,!![],R(0x84,0xc2));class TreeGroup extends InstancePlugin{[R(0x63,0x9d)](G,K){super[L(0x22b,0x1eb)](G,K);function L(G,K){return R(K,G-0x18e);}if(!G[L(0x20f,0x25b)]('tree'))throw new Error('The\x20TreeGroup\x20feature\x20requires\x20the\x20Tree\x20feature\x20to\x20be\x20enabled');}[R(0x7c,0x4e)](G){function H(G,K){return R(K,G- -0x126);}this[H(-0xc9,-0x90)]&&(G[H(-0x92,-0x9c)]=this[H(-0xc9,-0x10a)]);}['restoreChildRecord'](G){var K;function V(G,K){return R(K,G-0x7a);}((K=G['children'])===null||K===void 0x0?void 0x0:K[V(0x145,0x11a)])===0x0&&G[V(0xe6,0xa7)](G[V(0xb9,0xbb)]);}async[R(0xb6,0xdd)](){function x(G,K){return R(K,G-0x4d8);}this[x(0x5a6,0x5a7)]['store'][x(0x545,0x51d)]&&await this[x(0x5a6,0x55e)]['store'][x(0x51a,0x53e)](x(0x555,0x5a5),![]);}async['applyLevels'](G,K=!![]){const P=this,{store:S}=P[b(0x397,0x3e4)],y=P[b(0x397,0x3a8)][b(0x379,0x37b)][b(0x3a3,0x3a3)](B=>B instanceof TreeColumn),w=S[b(0x33f,0x303)][b(0x39b,0x3e6)](b(0x333,0x335));function b(G,K){return R(K,G-0x2c9);}P['_levels']=G,P[b(0x355,0x309)]++,await P[b(0x3a6,0x36d)]();if(P['isDestroyed'])return;if(G){w&&!(b(0x31b,0x2e6)in w)&&(w[b(0x31b,0x345)]=w[b(0x316,0x2f2)],w[b(0x316,0x2e3)]=![]);!P[b(0x308,0x309)]&&(S[b(0x35b,0x317)](Z=>{function f(G,K){return b(K-0x176,G);}Z['isParent']&&Z[f(0x4cb,0x48e)]['length']&&(Z[f(0x4af,0x47e)]=Z[f(0x4cc,0x48e)]['slice']());}),P[b(0x308,0x330)]=S[b(0x352,0x36c)][b(0x318,0x32d)][b(0x39d,0x389)]());const B=S[b(0x37f,0x3aa)](G,Z=>{function c(G,K){return b(K- -0x54,G);}ObjectHelper[c(0x363,0x350)](Z,S[c(0x2ec,0x2eb)][c(0x2f5,0x314)](y['field']),Z['key']),P[c(0x29a,0x2c3)](Z);});return K&&(S['data']=B[b(0x318,0x2d2)]),P[b(0x355,0x329)]--,B;}else WalkHelper['preWalk']({'$originalChildren':P['$originalChildren']},Z=>Z[b(0x308,0x2bd)],Z=>P[b(0x383,0x389)](Z)),K&&(S['data']=P[b(0x308,0x2e7)]),w&&(w[b(0x316,0x2e0)]=w['$originalPersist'],delete w[b(0x31b,0x2ea)]),P[b(0x308,0x2c6)]=null,P[b(0x355,0x3a2)]--;}[R(0x7e,0x50)](G){this['applyLevels'](G);}async[R(0x93,0xd1)](G){ObjectHelper['assertArray'](G,M(0x17,0xc));function M(G,K){return R(G,K- -0x7c);}await this[M(-0x1c,0x2d)](G);}async[R(0xc6,0xc1)](){function s(G,K){return R(G,K- -0x1f2);}await this[s(-0x13b,-0x149)](null);}get[R(0x72,0x8e)](){function W(G,K){return R(G,K- -0xab);}return Boolean(this[W(-0x73,-0x61)]);}}_defineProperty(TreeGroup,R(0x4c,0x84),'TreeGroup'),_defineProperty(TreeGroup,R(0xa0,0x74),{'levels':null,'parentCls':'b-generated-parent'}),_defineProperty(TreeGroup,R(0x11c,0xd0),{'assign':[R(0x107,0xd1),'clearGroups']});function p(G,K){const P=g();return p=function(S,y){S=S-0x1e4;let w=P[S];return w;},p(G,K);}function R(G,K){return p(K- -0x1a7,G);}_defineProperty(TreeGroup,'properties',{'isApplying':0x0}),TreeGroup[R(0x10,0x48)]=R(0xd8,0x9a),GridFeatureManager[R(0x31,0x64)](TreeGroup);function g(){const O=['3458915gGSAzM','disabled','selectRow','element','clearGroups','Gantt','sort','rowManager','getRowById','isParent','querySelector','1641384CHEjme','remove','vertical','length','startRecord','removeAttribute','client','finalizeReorder','pluginConfig','group','getFieldDefinition','14642370lvDECm','slice','removeCls','featureClass','addCls','472HOBRuY','insertBefore','find','setPath','hideContextMenu','waitForReadiness','features','dragStart','$originalChildren','records','doDestroy','await','cellEditDisabledState','contains','trigger','reorderValid','hoverExpandTimeout','_$name','onDrag','_levels','grid','move','persist','processParentData','children','updateLevels','first','$originalPersist','.b-focused','updateShowGrip','indexOf','targetSubGridElement','top','toggle','b-row-reordering','54677kYbnqc','originalRowTop','overRecord','parentCls','last','call','touchStartDelay','div','height','classList','registerFeature','readOnly','b-row-reorder-with-grip','clearTimeout','transform','hoverTimer','parentId','abort','appendChild','isLoading','getAt','parent','20473930jWPFLh','isTreeGrouped','setTranslateY','getRowAt','configurable','includes','modelClass','relayEvents','store','gridRowDrop','onDrop','tryInsertChild','3045003TEIHDY','load','dragHelper','6wqIrxf','firstElementChild','hasFeature','clientY','createElement','$name','cloneNode','nextSibling','b-row-drop-indicator','group()','rootNode','count','b-focused','isApplying','bodyContainer','isGrouped','oldPositionContext','11XMmAqi','init','traverse','getRow','cls','clearSorters','isSpecialRow','some','drag','isSelected','TreeGroup','style','rowReorder','construct','selectedRecords','getFieldDataSource','add','gridRowBeforeDropFinalize','startEvent','4134JFEHiE','getRecordFromElement','l0-l0','beforeDragStart','onPaint','destroy','applyLevels','b-row-reordering-target-parent','scrollable','RowReorder','onDragStart','.b-grid-row','gridRow','columns','pointerType','b-selected','parentIndex','dropIndicator','b-hover','treeify','valid','473QTEmxQ','onBeforeDragStart','restoreChildRecord','onReset','removeClsGlobally'];g=function(){return O;};return g();}export{RowReorder,TreeGroup};